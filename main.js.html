<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const fs = require('fs');
const Voter = require('./Voter');
const OptionList = require('./OptionList');
const VotingSystem = require('./VotingSystem');

/**
 * Main function to run the voting system.
 * Reads option and vote data from files,
 * creates a schedule based on the voter's votes and option priorities,
 * and outputs the result.
 */
async function main() {
  const optionFile = process.argv[2] || 'options.tsv';
  const voteFile = process.argv[3] || 'votes.tsv';
  const voterName = process.argv[4] || 'Anonymous';
  const randomnessInput = parseInt(process.argv[5], 10);
  const randomness = (randomnessInput >= 0 &amp;&amp; randomnessInput &lt;= 50) ? randomnessInput : 25;

  const voter = new Voter(voterName);

  const optionContent = await fs.promises.readFile(optionFile, 'utf-8');
  const options = new OptionList(OptionList.parseOptions(optionContent));

  const voteContent = await fs.promises.readFile(voteFile, 'utf-8');
  const votes = VotingSystem.parseVotes(voteContent, options);

  const votingSystem = new VotingSystem(voter, options.options);
  options.options.forEach((option) => {
    votingSystem.inputVotes(option, votes[option.name] || '');
  });

  const schedule = votingSystem.createSchedule(randomness);
  console.log(`Voter: ${schedule.voter.name}`);
  console.log('Option order:');
  schedule.optionOrder.forEach((option) => {
    console.log(`{index + 1}. ${option.name}`);
  });
}

main().catch((error) => {
  console.error('Error:', error.message);
  process.exit(1);
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Option.html">Option</a></li><li><a href="OptionList.html">OptionList</a></li><li><a href="Voter.html">Voter</a></li><li><a href="VotingSystem.html">VotingSystem</a></li></ul><h3>Global</h3><ul><li><a href="global.html#main">main</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri Apr 21 2023 21:57:21 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
